<div mat-dialog-title>
  <div class="d-flex justify-content-between align-items-center">
    <span>{{ 'crear usuario' | translate | capitalize }}</span>

    <button mat-dialog-close mat-icon-button>
      <mat-icon class="material-icons-outlined">close</mat-icon>
    </button>
  </div>
</div>

<div mat-dialog-content>
  <form [formGroup]="form">
    <div class="d-flex flex-wrap justify-content-between align-items-center">
      <mat-form-field appearance="outline" class="w-48 mt-1rem mb-1rem" floatLabel="always" subscriptSizing="dynamic">
        <mat-label>{{ 'nombre' | translate | capitalize }}</mat-label>
        <input autocomplete="off" formControlName="name" matInput type="text"/>
        @if (form.controls.name.hasError('required')) {
          <mat-error>
            {{ 'nombre obligatorio' | translate | uppercase }}
          </mat-error>
        }
        @if (form.controls.name.hasError('pattern')) {
          <mat-error>
            {{ 'nombre no válido' | translate | uppercase }}
          </mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-48 mt-1rem mb-1rem" floatLabel="always" subscriptSizing="dynamic">
        <mat-label>{{ 'apellidos' | translate | capitalize }}</mat-label>
        <input autocomplete="off" formControlName="lastName" matInput type="text"/>
        @if (form.controls.lastName.hasError('required')) {
          <mat-error>
            {{ 'apellidos obligatorio' | translate | uppercase }}
          </mat-error>
        }
        @if (form.controls.lastName.hasError('pattern')) {
          <mat-error>
            {{ 'apellidos no válido' | translate | uppercase }}
          </mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-48 mt-1rem mb-1rem" floatLabel="always" subscriptSizing="dynamic">
        <mat-label>{{ 'correo electrónico' | translate | capitalize }}</mat-label>
        <input autocomplete="off" formControlName="email" matInput type="email"/>
        @if (form.controls.email.hasError('required')) {
          <mat-error>
            {{ 'correo electrónico obligatorio' | translate | uppercase }}
          </mat-error>
        }
        @if (form.controls.email.hasError('pattern')) {
          <mat-error>
            {{ 'correo electrónico no válido' | translate | uppercase }}
          </mat-error>
        }
      </mat-form-field>

      @if (!isEditing()) {
        <mat-form-field appearance="outline" class="w-48 mt-1rem mb-1rem" floatLabel="always" subscriptSizing="dynamic">
          <mat-label>{{ 'contraseña' | translate | capitalize }}</mat-label>
          <input autocomplete="off" formControlName="password" matInput type="text"/>
          @if (form.controls.password.hasError('required')) {
            <mat-error>
              {{ 'contraseña obligatoria' | translate | uppercase }}
            </mat-error>
          }
          @if (form.controls.password.hasError('pattern')) {
            <mat-error>
              {{ '8 letras con 1 número, 1 mayúscula y 1 carácter especial' | translate | uppercase }}
            </mat-error>
          }
        </mat-form-field>
      }
    </div>
  </form>
</div>


<div class="d-flex justify-content-end" mat-dialog-actions>
  <button matDialogClose mat-flat-button>
    {{ 'cancelar' | translate | uppercase }}
  </button>

  <button [disabled]="form.invalid"
          mat-stroked-button
          (click)="isEditing() ? editUser() : createUser()">
    {{ (isEditing() ? 'editar': 'crear') | translate | uppercase }}
  </button>
</div>
